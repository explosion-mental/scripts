#!/bin/bash

if [[ "$(echo $1 | wc -m)" -gt 30 ]]
then
	visual="${1:0:20}"..."${1: -7}"
else
	visual="$1"
fi
echo "$visual"
alias xs="xsel -l /tmp/.xsel"

x=$(echo -e "ï©» vlc\nğŸ“¥ Download\nğŸ“”PDF\nğŸ“‹ Clipboard\nğŸ§ music\nï´ music shuffle\nï’ˆ browser\n ï€¾ sxiv\nï®§ wget\nw3m\nmpv (loop)\nmpv (float)" | dmenu -i -p "How should I open '$visual'?")
case "$x" in
	"ï©» vlc") notify-send "ï©» VLC" "Opening...\nğŸ“¼<i><b>'$2'</b></i>" && vlc "$1" ;;
	"ğŸ“¥ Download") notify-send "ğŸ¼Downloading..." "<u><i>'$2'</i></u>" && youtube-dl --add-metadata -i -x -f bestaudio/best "$1" && notify-send "DoneğŸ‘" "ğŸ“¼<i><b>'$2'</b></i> has finished dowloading";;
	"ğŸ“”PDF") curl -sL "$1" > "/tmp/$(echo "$1" | sed "s/.*\///;s/%20/ /g")" && zathura "/tmp/$(echo "$1" | sed "s/.*\///;s/%20/ /g")"  >/dev/null 2>&1 & ;;
#	"ğŸ“‹ Clipboard") echo "$1" | tr -d '\n' | xclip -selection clipboard
	"ğŸ“‹ Clipboard") echo "$1" | tr -d '\n' | xs
	notify-send "'$1' copied to clipboardğŸ“‹" & ;;
	"ğŸ§ music") st -t Music -e mpv "$1" --no-video & disown ;;
	"ï´ music shuffle") st -t Music -e mpv "$1" --no-video --shuffle & disown ;;
	"ï’ˆ browser") $BROWSER "$1" 2>/dev/null & disown ;;
	" ï€¾ sxiv") sxiv "$1" 2&>/dev/null & disown ;;
	"ï®§ wget") wget "$1" 2&/dev/null & disown ;;
	w3m) w3m "$1" 2&>/dev/null & disown ;;
	"mpv (loop)") mpv -quiet --loop "$1" 2&>/dev/null & disown ;;
	"mpv (float)") mpv --geometry=+0-0 --autofix=30% --title="Video" /dev/video0 "$1" 2&>/dev/null & disown ;;
esac
#ytdlplaylist) echo "$1" | xclip -selection clipboard;;
	#Clipboard) echo "$1" | xclip -selection clipboard;;ï©ïŸŠï€™
